{{- define "main" }}
  {{- $guidePage := .Site.GetPage "/guide" }}
  {{- $isComingSoon := and $guidePage $guidePage.Date (lt now $guidePage.Date) (eq hugo.Environment "production") }}

  {{/* Hero Section */}}
  <section class="min-vh-85 d-flex align-items-center justify-content-center" style="background: linear-gradient(135deg, #1a1a1a 0%, #0d1f2d 50%, #135289 100%);">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-xl-10 text-center">
          {{/* Badge */}}
          <div class="d-inline-flex align-items-center gap-2 px-4 py-2 rounded-pill bg-primary bg-opacity-20 text-white border border-primary border-opacity-30 mb-4">
            <i class="fa-solid fa-sparkles"></i>
            <span class="small fw-medium">{{ i18n "hero_badge" | default "Companion to the 2020 Scrum Guide" }}</span>
          </div>

          {{/* Main Title */}}
          <h1 class="display-3 display-md-1 fw-bold text-white mb-4 lh-sm">
            {{ .Site.Title | markdownify }}
          </h1>

          {{/* Subtitle */}}
          <p class="fs-5 fs-md-4 text-white text-opacity-70 mb-5 mx-auto" style="max-width: 48rem;">
            {{ .Site.Params.Description | markdownify }}
          </p>

          {{/* Creators */}}
          <div class="d-flex flex-column align-items-center gap-4 mb-5">
            <span class="text-white text-opacity-50 small text-uppercase fw-light ls-wider">{{ i18n "created_by" | default "Created by" }}</span>
            <div class="d-flex align-items-center gap-4 gap-md-5 flex-wrap justify-content-center">
              {{- $pages := .Site.RegularPages }}
              {{- range .Site.Home.Translations }}
                {{- $pages = $pages | lang.Merge .Site.RegularPages }}
              {{- end }}
              {{- range where $pages "Section" "creators" }}
                {{- if ne .Title "Creators" }}
                  <div class="d-flex align-items-center gap-3">
                    {{- $imageResource := "" }}
                    {{- if .Params.image }}
                      {{- $imageResource = .Resources.GetMatch .Params.image }}
                    {{- end }}
                    {{- if not $imageResource }}
                      {{- $urlifiedTitle := .Title | urlize }}
                      {{- $imageResource = .Resources.GetMatch (printf "%s.*" $urlifiedTitle) }}
                    {{- end }}
                    {{ with $imageResource }}
                      <img src="{{ .Permalink }}" alt="{{ $.Title }}" class="rounded-circle border border-primary border-2 border-opacity-50" width="48" height="48" />
                    {{ end }}
                    <div class="text-start">
                      <p class="mb-0 text-white fw-semibold small">{{ .Title }}</p>
                      <p class="mb-0 text-white text-opacity-50 small">{{ .Params.role }}</p>
                    </div>
                  </div>
                {{- end }}
              {{- end }}
            </div>
          </div>

          {{/* Scroll indicator */}}
          <div class="d-flex flex-column align-items-center gap-2 text-white text-opacity-60">
            <span class="small text-uppercase fw-light ls-wider">{{ i18n "explore_expansions" | default "Explore the Expansions" }}</span>
            <i class="fa-solid fa-arrow-down fa-bounce"></i>
          </div>
        </div>
      </div>
    </div>
  </section>

  {{/* Main Content */}}
  <main id="content" class="container my-5 py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-xl-11 col-xxl-10">
        {{ partial "components/tag-list.html" . }}

        {{ partial "components/core-guide-list.html" . }}

        {{ partial "components/extensions-guide-list.html" . }}
      </div>
    </div>
  </main>

  {{/* Community Section */}}
  <section class="py-5 bg-gradient-to-bottom">
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8 text-center">
          <div class="d-inline-flex align-items-center justify-content-center rounded bg-primary bg-opacity-10 text-primary mb-4" style="width: 4rem; height: 4rem;">
            <i class="fa-solid fa-heart fa-2x"></i>
          </div>

          <h2 class="display-6 fw-bold mb-4">{{ i18n "open_source_title" | default "Open Source &amp; Community Driven" }}</h2>
          <p class="fs-5 text-muted mb-5 mx-auto" style="max-width: 42rem;">
            {{ i18n "community_description" | default "This expansion pack thrives on community collaboration. Join practitioners worldwide in making Scrum more accessible and practical for everyone." }}
          </p>

          <div class="row g-4 mb-5 justify-content-center">
            <div class="col-4 col-md-3">
              <div class="text-center">
                <div class="display-6 fw-bold text-primary mb-2">{{ len .Site.Sections }}+</div>
                <div class="small text-muted">{{ i18n "expansions" | default "Expansions" }}</div>
              </div>
            </div>
            <div class="col-4 col-md-3">
              <div class="text-center">
                <div class="display-6 fw-bold text-primary mb-2">3</div>
                <div class="small text-muted">{{ i18n "expert_authors" | default "Expert Authors" }}</div>
              </div>
            </div>
            <div class="col-4 col-md-3">
              <div class="text-center">
                <div class="display-6 fw-bold text-primary mb-2">âˆž</div>
                <div class="small text-muted">{{ i18n "possibilities" | default "Possibilities" }}</div>
              </div>
            </div>
          </div>

          <div class="d-flex flex-wrap gap-3 justify-content-center">
            {{ if $isComingSoon }}
              <a href="#" class="btn btn-primary btn-lg disabled">
                <i class="fa-solid fa-message-circle me-2"></i>{{ i18n "join_discussion_button" | default "Join the Discussion" }}
              </a>
            {{ else }}
              <a href="{{ .Site.Params.githubUrl }}/discussions" class="btn btn-primary btn-lg" target="_blank" rel="noopener">
                <i class="fa-solid fa-message-circle me-2"></i>{{ i18n "join_discussion_button" | default "Join the Discussion" }}
              </a>
            {{ end }}
            <a href="{{ .Site.Params.githubUrl }}" class="btn btn-outline-secondary btn-lg" target="_blank" rel="noopener">
              <i class="fa-brands fa-github me-2"></i>{{ i18n "view_on_github" | default "View on GitHub" }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
{{- end }}
